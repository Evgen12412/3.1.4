<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html>
<head>
    <meta charset="utf-8">
    <title>Log in with your account</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script
  src="https://code.jquery.com/jquery-3.6.3.js"
  integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
  crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/style.css">

</head>

<body>
<div class="container-xx">
    <div class="" th:insert="blockPage/modal-add::modal"></div>
    <div class="" th:insert="blockPage/modal-edit::modal"></div>
    <div class="" th:insert="blockPage/header::nav"></div>

    <div class="containers f">

        <div class="" th:insert="blockPage/left-nav::nav-left"></div>

        <div>
            <h1 class="title">Admin panel</h1>
            <div class="" th:insert="blockPage/nav-bar::nav-bar"></div>
            <table class="table table-dark table-striped">
                <thead>
                <th>ID</th>

                <th>UserName</th>

                <th>SurName</th>

                <th>Password</th>

                <th>Age</th>

                <th>Email</th>

                <th>Roles</th>

                <th>Delete</th>

                <th>Edit</th>

                </thead>

                <tr th:each="user: ${allUsers}">
                    <td th:text="${user.getId()}">id</td>
                    <td th:text="${user.getName()}">name</td>
                    <td th:text="${user.getSurname()}">surname</td>
                    <td th:text="${user.getPassword()}">password</td>
                    <td th:text="${user.getAge()}">age</td>
                    <td th:text="${user.getEmail()}">email</td>
                    <td th:text="${user.getAuthorities()}"></td>
                    <td>
                        <form th:method="DELETE" th:action="@{/admin/{id}(id=${user.getId()})}">
                            <input type="submit" value="Delete" class="btn btn-primary"/>
                        </form>
                    </td>
                    <td>
                        <button  class="btn btn-warning" type="button" id="edit-user" data-bs-toggle="modal"
                                 data-bs-target="#editModal" th:data-userId="${user.id}">Update</button>
                    </td>
                </tr>
            </table>
        </div>

    </div>
    <!--            <button id="create-user" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Add</button>-->
    <!--            <input type="submit" value="add" onclick="window.location.href='addNewUser'">-->

</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

<!--<script>-->
<!--    $('#exampleModal').on('shown.bs.modal', function (e) {-->
<!--        let button = $(e.relatedTarget)-->
<!--        let userid = button.data('userid')-->

<!--        if (userid) {-->
<!--            $.get({-->
<!--                url: '/api/v1/user/' + userid,-->
<!--                success: function (data) {-->
<!--                    let modal = $(this)-->
<!--                    modal.find('#user-name').val(data.name)-->
<!--                    modal.find('#user-surname').val(data.surname)-->
<!--                    modal.find('#user-password').val(data.password)-->
<!--                    modal.find('#user-age').val(data.age)-->
<!--                    modal.find('#user-email').val(data.email)-->
<!--                    modal.find('#user-role').val(data.role)-->
<!--                },-->
<!--                error: (err) => {-->
<!--                    alert(err);-->
<!--                }-->
<!--            })-->
<!--        }-->
<!--    })-->
<!--</script>-->
<!--<script>-->
<!--    $(document).ready(function () {-->
<!--        $('.table .eBtn').on('click', function (e) {-->

<!--            $('.myForm #exampleModal').modal()-->
<!--        })-->
<!--    })-->
<!--</script>-->

<!--не открывается окно-->

<script src="/js/main.js"></script>
</body>
</html>
